<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>垃圾分類查詢</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2d3436;
            --secondary-color: #636e72;
            --accent-color: #00b894;
            --background: #ffffff;
            --surface: #f8f9fa;
            --border: #e9ecef;
            --text-primary: #2d3436;
            --text-secondary: #636e72;
            --shadow: rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        /* Material Icons */
        .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            -moz-osx-font-smoothing: grayscale;
            font-feature-settings: 'liga';
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 100;
            padding: 1rem;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .header-content {
            max-width: 600px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            min-width: 0;
        }

        .logo .material-icons {
            font-size: 1.75rem;
            color: var(--accent-color);
            flex-shrink: 0;
        }

        .logo-text {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        @media (max-width: 400px) {
            .logo {
                font-size: 1.25rem;
            }
            
            .logo .material-icons {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 360px) {
            .logo {
                font-size: 1.1rem;
            }
            
            .logo .material-icons {
                font-size: 1.3rem;
            }
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            gap: 0.75rem;
        }

        /* Language Toggle */
        .language-toggle {
            flex-shrink: 0;
        }

        .language-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border);
            background: var(--background);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 50%;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .language-btn:hover {
            border-color: var(--accent-color);
            background: var(--surface);
        }

        .language-btn:active {
            transform: scale(0.95);
        }

        .language-btn .material-icons {
            font-size: 22px;
        }

        /* Search Bar */
        .search-container {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.875rem 3rem 0.875rem 1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: var(--transition);
            background: var(--background);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(0, 184, 148, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            pointer-events: none;
        }

        .search-icon .material-icons {
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            max-width: 600px;
            margin: 0 auto;
            padding: 1.5rem 1rem 5rem;
            animation: fadeIn 0.5s ease 0.2s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem 1rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
            border-top: 1px solid var(--border);
            background: var(--background);
        }

        .footer p {
            margin: 0;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-icon {
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .empty-icon .material-icons {
            font-size: 4rem;
        }

        .empty-text {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Results Container */
        .results-container {
            display: grid;
            gap: 0.75rem;
        }

        /* List View */
        .results-container.list-view .item-card {
            display: flex;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 12px;
            transition: var(--transition);
            animation: slideInLeft 0.4s ease both;
        }

        .results-container.list-view .item-card:nth-child(1) { animation-delay: 0.05s; }
        .results-container.list-view .item-card:nth-child(2) { animation-delay: 0.1s; }
        .results-container.list-view .item-card:nth-child(3) { animation-delay: 0.15s; }
        .results-container.list-view .item-card:nth-child(4) { animation-delay: 0.2s; }
        .results-container.list-view .item-card:nth-child(5) { animation-delay: 0.25s; }

        @keyframes slideInLeft {
            from {
                transform: translateX(-20px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .results-container.list-view .item-card:hover {
            border-color: var(--accent-color);
            box-shadow: 0 2px 8px var(--shadow);
        }

        .results-container.list-view .item-image {
            width: 50px;
            height: 50px;
            object-fit: contain;
            border-radius: 8px;
            background: #ffffff;
            flex-shrink: 0;
        }

        .results-container.list-view .item-info {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
        }

        .results-container.list-view .item-name {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-primary);
            flex: 1;
        }

        .results-container.list-view .item-category {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            background: var(--surface);
            color: var(--text-secondary);
            font-size: 0.75rem;
            border-radius: 6px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        /* Gallery View */
        .results-container.gallery-view {
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .results-container.gallery-view .item-card {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: var(--transition);
            animation: scaleIn 0.4s ease both;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .results-container.gallery-view .item-card:nth-child(1) { animation-delay: 0.05s; }
        .results-container.gallery-view .item-card:nth-child(2) { animation-delay: 0.1s; }
        .results-container.gallery-view .item-card:nth-child(3) { animation-delay: 0.15s; }
        .results-container.gallery-view .item-card:nth-child(4) { animation-delay: 0.2s; }
        .results-container.gallery-view .item-card:nth-child(5) { animation-delay: 0.25s; }
        .results-container.gallery-view .item-card:nth-child(6) { animation-delay: 0.3s; }

        @keyframes scaleIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .results-container.gallery-view .item-card:hover {
            border-color: var(--accent-color);
            transform: translateY(-4px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .results-container.gallery-view .item-image {
            width: 100%;
            aspect-ratio: 1;
            object-fit: contain;
            background: #ffffff;
            display: block;
        }

        .results-container.gallery-view .item-info {
            padding: 0.75rem;
            text-align: center;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .results-container.gallery-view .item-name {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
            text-align: center;
        }

        .results-container.gallery-view .item-category {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Float Buttons Container */
        .float-buttons-container {
            position: fixed;
            bottom: 2rem;
            right: 1rem;
            z-index: 100;
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        /* View Toggle Button */
        .view-toggle-btn {
            width: 48px;
            height: 48px;
            background: var(--background);
            color: var(--text-primary);
            border: 2px solid var(--border);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 12px var(--shadow);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeInUp 0.5s ease 0.3s both;
        }

        .view-toggle-btn:hover {
            background: var(--surface);
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px var(--shadow);
        }

        .view-toggle-btn:active {
            transform: translateY(0) scale(0.95);
        }

        .view-toggle-btn .material-icons {
            font-size: 24px;
        }

        /* Category Float Button */

        .category-float-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.875rem 1.25rem;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 500;
            font-family: inherit;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);
            transition: var(--transition);
            animation: fadeInUp 0.5s ease 0.3s both;
        }

        @keyframes fadeInUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .category-float-btn:hover {
            background: #00a885;
            box-shadow: 0 6px 16px rgba(0, 184, 148, 0.4);
            transform: translateY(-2px);
        }

        .category-float-btn:active {
            transform: translateY(0) scale(0.98);
        }

        .category-float-btn svg {
            flex-shrink: 0;
        }

        .category-float-btn .material-icons {
            font-size: 20px;
        }

        /* Category Popup */
        .category-popup {
            position: fixed;
            bottom: calc(2rem + 48px + 1rem);
            right: 1rem;
            background: var(--background);
            border-radius: 16px;
            box-shadow: 0 8px 24px var(--shadow);
            min-width: 220px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: var(--transition);
            z-index: 99;
        }

        .category-popup.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .category-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1rem 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .category-popup-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .category-popup-close {
            width: 28px;
            height: 28px;
            border: none;
            background: var(--surface);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .category-popup-close .material-icons {
            font-size: 18px;
        }

        .category-popup-close:hover {
            background: var(--border);
        }

        .category-popup-list {
            padding: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .category-popup-item {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.875rem 1rem;
            border: none;
            background: transparent;
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: inherit;
            cursor: pointer;
            border-radius: 10px;
            transition: var(--transition);
            text-align: center;
        }

        .category-popup-item:hover {
            background: var(--surface);
        }

        .category-popup-item.active {
            background: rgba(0, 184, 148, 0.1);
            color: var(--accent-color);
            font-weight: 500;
        }

        .category-text {
            width: 100%;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--text-secondary);
        }

        .no-results-icon {
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .no-results-icon .material-icons {
            font-size: 3rem;
        }

        .no-results-text {
            font-size: 0.95rem;
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .welcome-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .welcome-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        .welcome-content {
            position: relative;
            background: var(--background);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.4s ease both;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-30px) scale(0.95);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .welcome-header {
            padding: 2rem 2rem 1.5rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .welcome-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--accent-color), #00d2a0);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .welcome-icon .material-icons {
            font-size: 32px;
            color: white;
        }

        .welcome-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .welcome-body {
            padding: 2rem;
        }

        .guide-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            animation: guideItemFadeIn 0.5s ease both;
        }

        .guide-item:nth-child(1) { animation-delay: 0.1s; }
        .guide-item:nth-child(2) { animation-delay: 0.2s; }
        .guide-item:nth-child(3) { animation-delay: 0.3s; }
        .guide-item:nth-child(4) { animation-delay: 0.4s; }

        @keyframes guideItemFadeIn {
            from {
                transform: translateX(-10px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .guide-item:last-child {
            margin-bottom: 0;
        }

        .guide-icon {
            width: 48px;
            height: 48px;
            background: var(--surface);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .guide-icon .material-icons {
            font-size: 24px;
            color: var(--accent-color);
        }

        .guide-text {
            flex: 1;
        }

        .guide-text h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0 0 0.25rem;
        }

        .guide-text p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.5;
        }

        .welcome-footer {
            padding: 1.5rem 2rem 2rem;
            text-align: center;
        }

        .welcome-btn {
            width: 100%;
            padding: 1rem 2rem;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            transition: var(--transition);
        }

        .welcome-btn:hover {
            background: #00a885;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 184, 148, 0.3);
        }

        .welcome-btn:active {
            transform: translateY(0);
        }

        @media (max-width: 480px) {
            .welcome-content {
                border-radius: 16px;
            }

            .welcome-header {
                padding: 1.5rem 1.5rem 1rem;
            }

            .welcome-title {
                font-size: 1.25rem;
            }

            .welcome-body {
                padding: 1.5rem;
            }

            .guide-item {
                gap: 0.75rem;
                margin-bottom: 1.25rem;
            }

            .guide-icon {
                width: 40px;
                height: 40px;
            }

            .guide-icon .material-icons {
                font-size: 20px;
            }

            .guide-text h3 {
                font-size: 0.9rem;
            }

            .guide-text p {
                font-size: 0.8rem;
            }

            .welcome-footer {
                padding: 1rem 1.5rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-top">
                <div class="logo">
                    <span class="material-icons">recycling</span>
                    <span class="logo-text" id="logoText">華神垃圾分類查詢</span>
                </div>
                
                <!-- Language Toggle -->
                <div class="language-toggle">
                    <button class="language-btn" id="languageToggle" title="切換語言">
                        <span class="material-icons">language</span>
                    </button>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput"
                    placeholder="搜尋垃圾名稱..."
                    autocomplete="off"
                >
                <span class="search-icon">
                    <span class="material-icons">search</span>
                </span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div id="mainContent">
            <!-- 內容將由 JavaScript 動態生成 -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>© 2026 Allen Liu</p>
    </footer>

    <!-- Float Buttons -->
    <div class="float-buttons-container">
        <!-- View Toggle Button -->
        <button class="view-toggle-btn" id="viewToggleBtn" title="切換檢視模式">
            <span class="material-icons" id="viewIcon">grid_view</span>
        </button>
        
        <!-- Category Float Button -->
        <button class="category-float-btn" id="categoryFloatBtn">
            <span class="material-icons">category</span>
            <span>選擇分類</span>
        </button>
    </div>

    <!-- Category Popup -->
    <div class="category-popup" id="categoryPopup">
        <div class="category-popup-header">
            <span class="category-popup-title">選擇分類</span>
            <button class="category-popup-close" id="categoryPopupClose">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="category-popup-list">
            <button class="category-popup-item active" data-category="">
                <span class="category-text">全部</span>
            </button>
            <button class="category-popup-item" data-category="一般垃圾">
                <span class="category-text">一般垃圾</span>
            </button>
            <button class="category-popup-item" data-category="廚餘">
                <span class="category-text">廚餘</span>
            </button>
            <button class="category-popup-item" data-category="紙容器/鋁箔包">
                <span class="category-text">紙容器/鋁箔包</span>
            </button>
            <button class="category-popup-item" data-category="紙類">
                <span class="category-text">紙類</span>
            </button>
            <button class="category-popup-item" data-category="玻璃">
                <span class="category-text">玻璃</span>
            </button>
            <button class="category-popup-item" data-category="鐵罐">
                <span class="category-text">鐵罐</span>
            </button>
            <button class="category-popup-item" data-category="鋁罐">
                <span class="category-text">鋁罐</span>
            </button>
        </div>
    </div>

    <!-- Welcome Guide Modal -->
    <div class="welcome-modal active" id="welcomeModal">
        <div class="welcome-backdrop"></div>
        <div class="welcome-content">
            <div class="welcome-header">
                <span class="welcome-icon">
                    <span class="material-icons">info</span>
                </span>
                <h2 class="welcome-title" id="welcomeTitle">使用說明</h2>
            </div>
            
            <div class="welcome-body">
                <div class="guide-item">
                    <div class="guide-icon">
                        <span class="material-icons">language</span>
                    </div>
                    <div class="guide-text">
                        <h3 id="guideLanguageTitle">切換語言</h3>
                        <p id="guideLanguageDesc">點擊右上角的地球圖示可以在中文和英文之間切換</p>
                    </div>
                </div>
                
                <div class="guide-item">
                    <div class="guide-icon">
                        <span class="material-icons">search</span>
                    </div>
                    <div class="guide-text">
                        <h3 id="guideSearchTitle">搜尋功能</h3>
                        <p id="guideSearchDesc">在搜尋框中輸入垃圾名稱,支援中文、英文、拼音模糊搜尋</p>
                    </div>
                </div>
                
                <div class="guide-item">
                    <div class="guide-icon">
                        <span class="material-icons">grid_view</span>
                    </div>
                    <div class="guide-text">
                        <h3 id="guideViewTitle">檢視模式</h3>
                        <p id="guideViewDesc">點擊右下角的圖示可以在列表和圖塊模式之間切換</p>
                    </div>
                </div>
                
                <div class="guide-item">
                    <div class="guide-icon">
                        <span class="material-icons">category</span>
                    </div>
                    <div class="guide-text">
                        <h3 id="guideCategoryTitle">選擇分類</h3>
                        <p id="guideCategoryDesc">點擊右下角的「選擇分類」按鈕可以快速篩選不同類別的垃圾</p>
                    </div>
                </div>
            </div>
            
            <div class="welcome-footer">
                <button class="welcome-btn" id="welcomeBtn">
                    <span id="welcomeBtnText">開始使用</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== 資料結構 =====
        // 範例資料格式 - 實際使用時替換為真實資料
        const wasteData = [
            // 廚餘
            { name: "香蕉皮", nameEn: "Banana Peel", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Banana_%28partially_peeled%29.jpg/250px-Banana_%28partially_peeled%29.jpg", category: "廚餘" },
            { name: "雞骨頭", nameEn: "Chicken Bone", image: "https://thumbs.dreamstime.com/b/%E9%B8%A1%E9%AA%A8-78360422.jpg", category: "廚餘" },
            { name: "蝦殼", nameEn: "Shrimp Shell", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQWBNGcJrdAxkToxYQmhrIW5a3ktGmrzEhkSQ&s", category: "廚餘" },
            { name: "咖啡渣", nameEn: "Coffee Grounds", image: "https://img.technews.tw/wp-content/uploads/2018/08/24173206/coffee-ground.jpg", category: "廚餘" },
            { name: "蛋殼", nameEn: "Eggshell", image: "https://i.epochtimes.com/assets/uploads/2024/08/id14319462-shutterstock_1928377061-600x364.jpg", category: "廚餘" },
            { name: "果皮(橘子皮)", nameEn: "Fruit Peel (Orange Peel)", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTc4s-AWX5uuyzYpS1owmqgz4pHc6df3vs6qg&s", category: "廚餘" },
            
            // 一般垃圾
            { name: "蛤蠣殼", nameEn: "Clam Shell", image: "https://thumb.photo-ac.com/e7/e78463c144436261656b6ecf012423bf_t.jpeg", category: "一般垃圾" },
            { name: "甘蔗渣", nameEn: "Sugarcane Bagasse", image: "https://agritech-foresight.atri.org.tw/archive/news/2025082959563ee6-e70e-441d-8bfa-88cffef43a5f.jpg", category: "一般垃圾" },
            { name: "咖啡杯蓋", nameEn: "Coffee Cup Lid", image: "https://www.futienjoe.com.tw/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/5/3/53e2e54cc99cc.jpg", category: "一般垃圾" },
            { name: "餐盒的塑膠蓋子", nameEn: "Plastic Lunch Box Lid", image: "https://cdn.ready-market.com.tw/951490ac/Templates/pic/H120.jpg?v=5c508bf1", category: "一般垃圾" },
            { name: "便當盒中層分裝蓋", nameEn: "Bento Box Divider Lid", image: "https://www.hongzhen83569747.com.tw/upload/202410221415439m1771.jpg", category: "一般垃圾" },
            { name: "寶特瓶瓶蓋", nameEn: "Plastic Bottle Cap", image: "https://pgw.udn.com.tw/gw/photo.php?u=/photo/2024/11/22/0/30953230.png&x=0&y=0&sw=0&sh=0&exp=3600", category: "一般垃圾" },
            { name: "飲料封膜", nameEn: "Drink Sealing Film", image: "https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-10086-i.jpg", category: "一般垃圾" },
            { name: "吸管", nameEn: "Straw", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Trinkhalm.jpg/250px-Trinkhalm.jpg", category: "一般垃圾" },
            { name: "吸管套", nameEn: "Straw Wrapper", image: "https://www.yeong-yuan.com.tw/templates/cache/22495/images/products/photobig-22495-594667.jpg", category: "一般垃圾" },
            { name: "護貝過的紙張", nameEn: "Laminated Paper", image: "https://winall.com.tw/wp-content/uploads/S__187392020.jpg", category: "一般垃圾" },
            { name: "塑膠餐具", nameEn: "Plastic Utensils", image: "https://doqvf81n9htmm.cloudfront.net/data/alicelee_126/esg3/87/shutterstock_1985558585.jpg", category: "一般垃圾" },
            { name: "保麗龍", nameEn: "Styrofoam", image: "https://www.xhhb.com.tw/uploads/xhhb/images/202410140138561443.jpg", category: "一般垃圾" },
            { name: "茶包", nameEn: "Tea Bag", image: "https://www.sumusen.com.tw/wp-content/uploads/2025/02/%E8%8C%B6%E5%8C%85%E6%98%AF%E5%BB%9A%E9%A4%98%E5%97%8E.webp", category: "一般垃圾" },
            { name: "泡泡紙", nameEn: "Bubble Wrap", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRO_UigUZZRbkilXw4LXCTCy5SsvNyRKpUcnA&s", category: "一般垃圾" },
            { name: "蓮蓬頭", nameEn: "Shower Head", image: "https://media.nownews.com/nn_media/thumbnail/2025/04/1744359736826-1bb04e4af02c40639ed3edcd1353be0a-800x800.webp?unShow=false&waterMark=false", category: "一般垃圾" },
            { name: "咖啡濾紙", nameEn: "Coffee Filter", image: "https://cdn.store-assets.com/s/1163940/i/57536312.jpeg", category: "一般垃圾" },
            { name: "瓦楞紙箱", nameEn: "Corrugated Cardboard", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRhYbzYWFhZww3dBwCqqXPMidr3IQhXSu7_tA&s", category: "一般垃圾" },
            { name: "玉米芯", nameEn: "Corn Cob", image: "https://noahgetaways.tw/wp-content/uploads/2025/12/19/019f92b2a66ad3c29067361e65974a31.jpeg", category: "一般垃圾" },
            { name: "優格杯", nameEn: "Yogurt Cup", image: "https://static.iyp.tw/39729/products/photooriginal-1775866-fDxYU.jpg", category: "一般垃圾" },
            
            // 紙容器/鋁箔包
            { name: "紙餐盒", nameEn: "Paper Lunch Box", image: "https://shoplineimg.com/61ad5f979f75e0003beb2db0/66e1303bf28172000da58d97/800x.jpg?", category: "紙容器/鋁箔包" },
            { name: "食品紙袋(內層鍍膜)", nameEn: "Coated Paper Bag", image: "https://img.91app.com/webapi/imagesV3/Original/SalePage/8668649/0/638605189771900000?v=1", category: "紙容器/鋁箔包" },
            { name: "比薩盒", nameEn: "Pizza Box", image: "https://static01.nyt.com/images/2018/05/21/climate/20cli-aspirational-pizza/20cli-aspirational-pizza-master1050.jpg", category: "紙容器/鋁箔包" },
            { name: "手搖飲料杯", nameEn: "Bubble Tea Cup", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT70mqkB19oit-fvhD-DJCMVuMWg-wIlB7t3A&s", category: "紙容器/鋁箔包" },
            
            // 紙類
            { name: "手提紙購物袋", nameEn: "Paper Shopping Bag", image: "https://www.9x9.tw/public/files/product/thumb/N72375-95005S.jpg", category: "紙類" },
            { name: "食品紙袋(包裝用)", nameEn: "Food Packaging Paper Bag", image: "https://www.brain.com.tw/Upload/News/2(249).jpg", category: "紙類" },
            { name: "碎紙", nameEn: "Shredded Paper", image: "https://www.biccamera.com.c.lj.hpcn.transer-cn.com/bc/include_cms_contents/topics/osusume_shredder/osusume_shredder_05.jpg", category: "紙類" },
            { name: "各式廣告傳單文宣", nameEn: "Flyers and Brochures", image: "https://40152013.weebly.com/uploads/1/9/5/9/19590661/9955371.jpg?244", category: "紙類" },
            { name: "舊書", nameEn: "Old Books", image: "https://717.com.hk/wp-content/uploads/2017/05/20170421_102454.jpg", category: "紙類" },
            
            // 玻璃
            { name: "玻璃調味罐", nameEn: "Glass Seasoning Jar", image: "https://cdn2.ettoday.net/images/5205/d5205035.jpg", category: "玻璃" },
            
            // 鐵罐
            { name: "麥香鐵罐裝飲料", nameEn: "Mai Xiang Canned Drink", image: "https://cf.shopee.tw/file/tw-11134207-7r991-lxb97g4e6vcgfc", category: "鐵罐" },
            { name: "伯朗鐵罐裝飲料", nameEn: "Mr. Brown Canned Drink", image: "https://cdn-next.cybassets.com/media/W1siZiIsIjE2Mjk2L3Byb2R1Y3RzLzQyMzc3Mjk0LzE2OTUzNjMzNDFfZjVhMTAzZDA4OWE0MTU1ZTM0YTAuanBlZyJdLFsicCIsInRodW1iIiwiNjAweDYwMCJdXQ.jpeg?sha=d6eafd2475c01b66", category: "鐵罐" },
            
            // 鋁罐
            { name: "汽水罐", nameEn: "Soda Can", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRr1oOB1hMZ4fhLr0m0p3oS15t3axebZCdTlg&s", category: "鋁罐" },
        ];

        const categories = ["一般垃圾", "廚餘", "紙容器/鋁箔包", "紙類", "玻璃", "鐵罐", "鋁罐"];

        // ===== 狀態管理 =====
        let currentView = 'gallery'; // 'list' or 'gallery'，預設為畫廊
        let currentCategory = '';
        let currentLanguage = 'zh'; // 'zh' or 'en'

        // ===== DOM 元素 =====
        const searchInput = document.getElementById('searchInput');
        const viewToggleBtn = document.getElementById('viewToggleBtn');
        const viewIcon = document.getElementById('viewIcon');
        const categoryFloatBtn = document.getElementById('categoryFloatBtn');
        const categoryPopup = document.getElementById('categoryPopup');
        const categoryPopupClose = document.getElementById('categoryPopupClose');
        const mainContent = document.getElementById('mainContent');
        const languageToggle = document.getElementById('languageToggle');
        const logoText = document.getElementById('logoText');
        const welcomeModal = document.getElementById('welcomeModal');
        const welcomeBtn = document.getElementById('welcomeBtn');

        // ===== 多語言文字 =====
        const translations = {
            zh: {
                title: '華神垃圾分類查詢',
                searchPlaceholder: '搜尋垃圾名稱...',
                selectCategory: '選擇分類',
                categoryTitle: '選擇分類',
                all: '全部',
                generalWaste: '一般垃圾',
                foodWaste: '廚餘',
                paperContainer: '紙容器/鋁箔包',
                paper: '紙類',
                glass: '玻璃',
                can: '鐵罐',
                aluminumCan: '鋁罐',
                noResults: '找不到相關結果',
                welcomeTitle: '使用說明',
                guideLanguageTitle: '切換語言',
                guideLanguageDesc: '點擊右上角的地球圖示可以在中文和英文之間切換',
                guideSearchTitle: '搜尋功能',
                guideSearchDesc: '在搜尋框中輸入垃圾名稱,支援中文、英文、拼音模糊搜尋',
                guideViewTitle: '檢視模式',
                guideViewDesc: '點擊右下角的圖示可以在列表和圖塊模式之間切換',
                guideCategoryTitle: '選擇分類',
                guideCategoryDesc: '點擊右下角的「選擇分類」按鈕可以快速篩選不同類別的垃圾',
                welcomeBtnText: '開始使用'
            },
            en: {
                title: 'CES Waste Classification',
                searchPlaceholder: 'Search waste items...',
                selectCategory: 'Category',
                categoryTitle: 'Select Category',
                all: 'All',
                generalWaste: 'General Waste',
                foodWaste: 'Food Waste',
                paperContainer: 'Paper Container',
                paper: 'Paper',
                glass: 'Glass',
                can: 'Can',
                aluminumCan: 'Aluminum Can',
                noResults: 'No results found',
                welcomeTitle: 'User Guide',
                guideLanguageTitle: 'Switch Language',
                guideLanguageDesc: 'Click the globe icon in the top right to switch between Chinese and English',
                guideSearchTitle: 'Search Function',
                guideSearchDesc: 'Enter waste item names in the search box, supports Chinese, English, and Pinyin fuzzy search',
                guideViewTitle: 'View Mode',
                guideViewDesc: 'Click the icon in the bottom right to switch between list and gallery view',
                guideCategoryTitle: 'Select Category',
                guideCategoryDesc: 'Click the "Category" button in the bottom right to quickly filter different waste categories',
                welcomeBtnText: 'Get Started'
            }
        };

        // 分類中英對照
        const categoryMap = {
            '一般垃圾': 'General Waste',
            '廚餘': 'Food Waste',
            '紙容器/鋁箔包': 'Paper Container',
            '紙類': 'Paper',
            '玻璃': 'Glass',
            '鐵罐': 'Can',
            '鋁罐': 'Aluminum Can'
        };

        // ===== 繁簡英轉換表 =====
        const charMap = {
            // 繁體轉拼音
            '寶': 'bao', '特': 'te', '瓶': 'ping',
            '鋁': 'lv', '箔': 'bo', '包': 'bao',
            '紙': 'zhi', '類': 'lei', '盒': 'he',
            '袋': 'dai', '塑': 'su', '膠': 'jiao',
            '衛': 'wei', '生': 'sheng',
            '口': 'kou', '罩': 'zhao',
            '果': 'guo', '皮': 'pi',
            '菜': 'cai', '葉': 'ye',
            '剩': 'sheng', '飯': 'fan',
            '報': 'bao', '箱': 'xiang',
            '雜': 'za', '誌': 'zhi',
            '玻': 'bo', '璃': 'li',
            '酒': 'jiu',
            '罐': 'guan', '鐵': 'tie',
            '廚': 'chu', '餘': 'yu',
            '垃': 'la', '圾': 'ji',
            '一': 'yi', '般': 'ban',
        };

        // 簡體字映射
        const simplifiedMap = {
            '宝': '寶', '铝': '鋁', '箔': '箔', '纸': '紙', '类': '類',
            '盒': '盒', '袋': '袋', '塑': '塑', '胶': '膠', '卫': '衛',
            '口': '口', '罩': '罩', '果': '果', '皮': '皮', '菜': '菜',
            '叶': '葉', '剩': '剩', '饭': '飯', '报': '報', '箱': '箱',
            '杂': '雜', '志': '誌', '玻': '玻', '璃': '璃', '酒': '酒',
            '罐': '罐', '铁': '鐵', '厨': '廚', '余': '餘', '垃': '垃',
            '圾': '圾', '一': '一', '般': '般',
        };

        // ===== 工具函數 =====
        function updateLanguage(lang) {
            currentLanguage = lang;
            const t = translations[lang];
            
            // 更新界面文字
            logoText.textContent = t.title;
            searchInput.placeholder = t.searchPlaceholder;
            categoryFloatBtn.querySelector('span:last-child').textContent = t.selectCategory;
            document.querySelector('.category-popup-title').textContent = t.categoryTitle;
            
            // 更新歡迎彈窗文字
            document.getElementById('welcomeTitle').textContent = t.welcomeTitle;
            document.getElementById('guideLanguageTitle').textContent = t.guideLanguageTitle;
            document.getElementById('guideLanguageDesc').textContent = t.guideLanguageDesc;
            document.getElementById('guideSearchTitle').textContent = t.guideSearchTitle;
            document.getElementById('guideSearchDesc').textContent = t.guideSearchDesc;
            document.getElementById('guideViewTitle').textContent = t.guideViewTitle;
            document.getElementById('guideViewDesc').textContent = t.guideViewDesc;
            document.getElementById('guideCategoryTitle').textContent = t.guideCategoryTitle;
            document.getElementById('guideCategoryDesc').textContent = t.guideCategoryDesc;
            document.getElementById('welcomeBtnText').textContent = t.welcomeBtnText;
            
            // 更新分類按鈕文字
            const categoryButtons = document.querySelectorAll('.category-popup-item');
            categoryButtons[0].querySelector('.category-text').textContent = t.all;
            categoryButtons[1].querySelector('.category-text').textContent = t.generalWaste;
            categoryButtons[2].querySelector('.category-text').textContent = t.foodWaste;
            categoryButtons[3].querySelector('.category-text').textContent = t.paperContainer;
            categoryButtons[4].querySelector('.category-text').textContent = t.paper;
            categoryButtons[5].querySelector('.category-text').textContent = t.glass;
            categoryButtons[6].querySelector('.category-text').textContent = t.can;
            categoryButtons[7].querySelector('.category-text').textContent = t.aluminumCan;
            
            // 重新渲染當前內容
            const searchTerm = searchInput.value.trim();
            if (searchTerm !== '') {
                const results = fuzzySearch(searchTerm, wasteData);
                renderResults(results);
            } else if (currentCategory === '') {
                renderResults(wasteData);
            } else {
                const categoryItems = wasteData.filter(item => item.category === currentCategory);
                renderResults(categoryItems);
            }
        }

        function normalizeText(text) {
            text = text.toLowerCase();
            
            // 轉換簡體為繁體
            for (let [simplified, traditional] of Object.entries(simplifiedMap)) {
                text = text.replace(new RegExp(simplified, 'g'), traditional);
            }
            
            return text;
        }

        function fuzzySearch(searchTerm, items) {
            searchTerm = normalizeText(searchTerm);
            const searchTermLower = searchTerm.toLowerCase();
            
            return items.filter(item => {
                const itemName = normalizeText(item.name);
                const itemNameEn = item.nameEn ? item.nameEn.toLowerCase() : '';
                const itemCategory = normalizeText(item.category);
                
                // 1. 完全匹配（中文或英文）
                if (itemName.includes(searchTerm) || 
                    itemNameEn.includes(searchTermLower) ||
                    itemCategory.includes(searchTerm)) {
                    return true;
                }
                
                // 2. 拼音匹配
                let pinyinName = '';
                for (let char of item.name) {
                    pinyinName += charMap[char] || char;
                }
                
                if (pinyinName.toLowerCase().includes(searchTermLower)) {
                    return true;
                }
                
                // 3. 部分字元匹配（適合輸入錯字或不完整的情況）
                // 例如：搜尋"蕉"可以找到"香蕉皮"
                const searchChars = searchTerm.split('');
                const nameChars = item.name.split('');
                
                let matchCount = 0;
                for (let searchChar of searchChars) {
                    if (nameChars.includes(searchChar)) {
                        matchCount++;
                    }
                }
                
                // 如果搜尋詞的字元有超過一半在品項名稱中，就算匹配
                if (searchChars.length > 0 && matchCount / searchChars.length >= 0.5) {
                    return true;
                }
                
                // 4. 英文單字部分匹配
                // 例如：搜尋"banana"可以找到包含"Banana"的品項
                if (searchTermLower.length >= 3) {
                    const enWords = itemNameEn.split(/[\s\-()]+/);
                    for (let word of enWords) {
                        if (word.startsWith(searchTermLower) || word.includes(searchTermLower)) {
                            return true;
                        }
                    }
                }
                
                // 5. 中文單字部分匹配
                // 例如：搜尋"杯"可以找到"咖啡杯蓋"、"優格杯"
                if (searchTerm.length >= 1) {
                    const nameWords = item.name.split(/[、，。]/);
                    for (let word of nameWords) {
                        if (word.includes(searchTerm)) {
                            return true;
                        }
                    }
                }
                
                return false;
            });
        }

        // ===== 渲染函數 =====
        function renderResults(items) {
            const t = translations[currentLanguage];
            
            if (items.length === 0) {
                mainContent.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">
                            <span class="material-icons">search_off</span>
                        </div>
                        <div class="no-results-text">${t.noResults}</div>
                    </div>
                `;
                return;
            }
            
            const viewClass = currentView === 'list' ? 'list-view' : 'gallery-view';
            
            const html = `
                <div class="results-container ${viewClass}">
                    ${items.map(item => {
                        const itemName = currentLanguage === 'en' ? item.nameEn : item.name;
                        const categoryText = currentLanguage === 'en' ? categoryMap[item.category] : item.category;
                        return `
                            <div class="item-card">
                                <img src="${item.image}" alt="${itemName}" class="item-image" 
                                     onerror="this.src='https://via.placeholder.com/200?text=${encodeURIComponent(itemName)}'">
                                <div class="item-info">
                                    <div class="item-name">${itemName}</div>
                                    <div class="item-category">${categoryText}</div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
            
            mainContent.innerHTML = html;
        }

        // ===== 事件處理 =====
        // 歡迎彈窗
        welcomeBtn.addEventListener('click', () => {
            welcomeModal.classList.remove('active');
        });

        // 語言切換
        languageToggle.addEventListener('click', () => {
            // 在中英文之間切換
            const newLang = currentLanguage === 'zh' ? 'en' : 'zh';
            updateLanguage(newLang);
        });

        // 檢視模式切換
        viewToggleBtn.addEventListener('click', () => {
            if (currentView === 'gallery') {
                currentView = 'list';
                viewIcon.textContent = 'view_list';
            } else {
                currentView = 'gallery';
                viewIcon.textContent = 'grid_view';
            }
            
            // 重新渲染當前內容
            const searchTerm = searchInput.value.trim();
            if (searchTerm !== '') {
                const results = fuzzySearch(searchTerm, wasteData);
                renderResults(results);
            } else if (currentCategory === '') {
                renderResults(wasteData);
            } else {
                const categoryItems = wasteData.filter(item => item.category === currentCategory);
                renderResults(categoryItems);
            }
        });

        // 搜尋功能
        let searchTimeout;
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            
            const searchTerm = e.target.value.trim();
            
            // 如果有搜尋內容，清空分類選擇
            if (searchTerm !== '') {
                currentCategory = '';
                document.querySelectorAll('.category-popup-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector('.category-popup-item[data-category=""]').classList.add('active');
            }
            
            if (searchTerm === '') {
                // 如果沒有選擇分類，顯示全部
                if (currentCategory === '') {
                    renderResults(wasteData);
                } else {
                    // 顯示當前選擇的分類
                    const categoryItems = wasteData.filter(item => item.category === currentCategory);
                    renderResults(categoryItems);
                }
                return;
            }
            
            searchTimeout = setTimeout(() => {
                const results = fuzzySearch(searchTerm, wasteData);
                renderResults(results);
            }, 300);
        });

        // 分類懸浮按鈕
        categoryFloatBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            categoryPopup.classList.toggle('active');
        });

        // 關閉彈出選單
        categoryPopupClose.addEventListener('click', (e) => {
            e.stopPropagation();
            categoryPopup.classList.remove('active');
        });

        // 點擊外部關閉
        document.addEventListener('click', (e) => {
            if (!categoryPopup.contains(e.target) && 
                !categoryFloatBtn.contains(e.target) && 
                !viewToggleBtn.contains(e.target)) {
                categoryPopup.classList.remove('active');
            }
        });

        // 分類選項點擊
        categoryPopup.addEventListener('click', (e) => {
            if (e.target.closest('.category-popup-item')) {
                const item = e.target.closest('.category-popup-item');
                const selectedCategory = item.dataset.category;
                
                // 更新 active 狀態
                document.querySelectorAll('.category-popup-item').forEach(i => {
                    i.classList.remove('active');
                });
                item.classList.add('active');
                
                // 記錄當前分類
                currentCategory = selectedCategory;
                
                // 清空搜尋框
                searchInput.value = '';
                
                // 關閉彈出選單
                categoryPopup.classList.remove('active');
                
                // 如果選擇「全部」或空值，顯示所有內容
                if (selectedCategory === '') {
                    renderResults(wasteData);
                } else {
                    // 顯示該分類的所有項目
                    const categoryItems = wasteData.filter(item => item.category === selectedCategory);
                    renderResults(categoryItems);
                }
            }
        });

        // ===== 初始化 =====
        // 頁面載入時顯示所有內容
        window.addEventListener('DOMContentLoaded', () => {
            renderResults(wasteData);
        });
    </script>
</body>
</html>
